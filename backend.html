<!doctype html>
<html>

<head>

<style>
.user { 
    border: 1px solid black;
    float: left;
    margin: 5px;
    padding: 5px;
    word-wrap: break-word;
}
</style>

</head>

<body>

    There are <span id="TotalUsers"></span> total users.<br>


    <div id="users"></div>


    <script src="socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
    $(function() {	
    var socket = io();

    socket.on('update info', function(info){
        $('#users').append('<div id='+info.id+' class="user"></div>');
        $('#'+info.id).append($('<div>').text(info.hosts));
        $('#'+info.id).append($('<div>').text(info.referrers));
    for (number in info.creatives) {
        $('#'+info.id).append(info.creatives[number].id+'<div id='+info.creatives[number].id+' class="visible"></div>');
        $('#'+info.id).append($('<li>').html("Bid: " + info.creatives[number].pm_bid));
        $('#'+info.id).append($('<li>').html(info.creatives[number].tag)); 
    }
      });

    socket.on('update backend visible', function(info){
    for (number in info.creatives) {
        $('#'+info.id + ' #'+info.creatives[number].id).text("Visible: " + info.creatives[number].visible);
    }
      });

    socket.on('userJoined', function (data) {
        console.log('A user joined with id #' + data.id);
        $('#TotalUsers').text(data.total - 1);
    });

    socket.on('user left', function (data) {
        $('#TotalUsers').text(data.susers - 1);
       $('#' + data.suid).remove();
        console.log('A user disconnected with id #' + data.suid);
    });
});

    </script>

  
</body>

</html>

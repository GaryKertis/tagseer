function drawChart(){var t=google.visualization.arrayToDataTable([["Sites","Users"],["Unknown",0]]),e={title:"Sites by User",hAxis:{title:"Site",titleTextStyle:{color:"black"}},animation:{duration:500,easing:"out"},vAxis:{minValue:0,maxValue:50}};chart=new google.visualization.ColumnChart(document.getElementById("chart_div")),chart.draw(t,e)}var mapOptions={center:new google.maps.LatLng(39.5,-98.35),zoom:4},sitelist=[],chart,map=new google.maps.Map(document.getElementById("map-canvas"),mapOptions),styles=[{featureType:"landscape",stylers:[{saturation:-100},{visibility:"simplified"}]}];map.setOptions({styles:styles}),google.load("visualization","1",{packages:["corechart"]}),google.setOnLoadCallback(drawChart),$(function(){var t=io(document.location.host,{multiplex:!0,path:"/socket.io"}),e=(new Object,new Object,new Object);t.emit("bc"),t.on("ui",function(t){function e(t){var e,i=[],a=[];t.sort();for(var o=0;o<t.length;o++)t[o]!==e?(i.push(t[o]),a.push(1)):a[a.length-1]++,e=t[o];return[i,a]}sitelist.push($("#"+t.id).length?"unknown":t.site),chartSites=e(sitelist),chartdata=[["Site","Users"]];for(var i=0;i<chartSites[0].length;i++)chartdata.push([chartSites[0][i],chartSites[1][i]]);console.log(chartdata);var a=google.visualization.arrayToDataTable(chartdata),o={title:"Sites by User",hAxis:{title:"Site",titleTextStyle:{color:"black"}},animation:{duration:500,easing:"out"},vAxis:{minValue:0,maxValue:50}};chart.draw(a,o)}),t.on("ubv",function(t){for(var i in t.creatives)if(creative=t.creatives[i],"undefined"!=typeof e[t.id]&&"number"==typeof creative.visible){if(creative.visible>0){var a=e[t.id].get("icon");a.fillColor="green",a.strokeColor="green",a.fillOpacity=creative.visible,e[t.id].set("icon",a)}if(creative.visible<=0){var a=e[t.id].get("icon");a.strokeColor="red",a.fillColor="red",a.fillOpacity=.05,e[t.id].set("icon",a)}}}),t.on("uj",function(t){function i(t){var e=30,i=window.setInterval(function(){e--;var a=t.get("icon");a.strokeWeight=e,t.set("icon",a),1>=e&&clearInterval(i)},15)}$("#TotalUsers").text(t.total-1);var a={icon:{path:google.maps.SymbolPath.CIRCLE,fillOpacity:.05,fillColor:"#ff0000",strokeOpacity:1,strokeColor:"#ff0000",strokeWeight:30,scale:5},map:map,position:new google.maps.LatLng(t.latitude,t.longitude)};e[t.id]=new google.maps.Marker(a),"undefined"!=typeof e[t.id]&&i(e[t.id])}),t.on("ul",function(t){function i(t){var e=t.get("icon"),i=30,a=window.setInterval(function(){i--,e.strokeWeight=i,e.strokeColor="#000000",t.set("icon",e),0>=i&&(clearInterval(a),t.setMap(null))},20)}$("#TotalUsers").text(t.susers-1),$("#"+t.suid).remove(),"undefined"!=typeof e[t.suid]&&i(e[t.suid])})});